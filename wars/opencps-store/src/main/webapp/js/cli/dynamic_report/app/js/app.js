(function(e){function t(t){for(var o,i,s=t[0],l=t[1],u=t[2],c=0,d=[];c<s.length;c++)i=s[c],a[i]&&d.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);p&&p(t);while(d.length)d.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],o=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(o=!1)}o&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},a={app:0},n=[];function i(e){return s.p+"../../docs/o/opencps-frontend-cli/dynamic_report/app/js/"+({HoanThienBoSungHoSoDetail:"HoanThienBoSungHoSoDetail",Landing:"Landing",TiepNhanHoSoDetail:"TiepNhanHoSoDetail"}[e]||e)+".js"}function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,o){r=a[e]=[t,o]});t.push(r[2]=o);var n,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(e),n=function(t){l.onerror=l.onload=null,clearTimeout(u);var r=a[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+o+": "+n+")");i.type=o,i.request=n,r[1](i)}a[e]=void 0}};var u=setTimeout(function(){n({type:"timeout",target:l})},12e4);l.onerror=l.onload=n,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var p=u;n.push(["56d7","chunk-vendors"]),r()})({"19cd":function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{attrs:{"close-on-content-click":!0,lazy:"",transition:"fade-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"}},[r("v-text-field",{attrs:{slot:"activator","append-icon":"event",value:e.formatDate(e.rawDate),rules:[e.rules.required]},on:{blur:function(t){e.toDate=e.parseDate(e.toDateFormatted)}},slot:"activator"},[r("template",{slot:"label"},[e._v(e._s(e.item["label"])+" "),e.item.required?r("span",{staticClass:"red--text darken-3"},[e._v("*")]):e._e()])],2),r("v-date-picker",{attrs:{max:e.maxDate,min:e.minDate,"no-title":""},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}})],1)},a=[],n=r("830f"),i=n["a"],s=r("2877"),l=r("6544"),u=r.n(l),c=r("2e4b"),p=r("e449"),d=r("2677"),f=Object(s["a"])(i,o,a,!1,null,null,null);f.options.__file="DatetimePicker.vue";t["a"]=f.exports;u()(f,{VDatePicker:c["a"],VMenu:p["a"],VTextField:d["a"]})},"3c87":function(e,t,r){"use strict";var o="\n    {\n        getDynamicReports(start: -1, end: -1) {\n            dynamicReportId\n            reportCode\n            reportName\n            filterConfig\n            tableConfig\n            userConfig\n            sharing\n        }\n    }\n",a='\n    mutation {\n        updateDynamicReport(\n            body: "INPUTBODY"\n        ) {\n            dynamicReportId\n        }\n    }\n';t["a"]={getDynamicReports:o,updateDynamicReport:a}},4360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return store});var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026"),vuex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2f62"),toastr__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),_support_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bbd0"),_support_json__WEBPACK_IMPORTED_MODULE_4___namespace=__webpack_require__.t("bbd0",1),_AdminConfig__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("3c87"),FileSaver=__webpack_require__("c28d");vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(toastr__WEBPACK_IMPORTED_MODULE_2___default.a),vue__WEBPACK_IMPORTED_MODULE_0__["a"].use(vuex__WEBPACK_IMPORTED_MODULE_1__["a"]);var store=new vuex__WEBPACK_IMPORTED_MODULE_1__["a"].Store({state:{groupId:void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0,snackbarerror:!1,snackbarsocket:!1,refreshSocket:0,initData:{},dataSocket:{},pullCounter:0,tocken:"",loginUser:[{email:"",role:""}],user:null,socket:{isConnected:!1,message:"",reconnectError:!1},endPointApi:"/o/rest/v2",getDeliverableTypes:[],getContentFile:"",getContentFileSimple:[],selected:["dossierNo","delegateName","delegateAddress","delegateTelNo","receiveDate","dueDate"],reportType:"REPORT_01",groupType:"domain",siteName:"",itemsReports:[],reportConfigStatic:{}},actions:{loadInitResource:function(e){var t=e.commit,r=e.state;return new Promise(function(e){null!==window.themeDisplay&&void 0!==window.themeDisplay?(r.initData["groupId"]=window.themeDisplay.getScopeGroupId(),r.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(r.initData["groupId"]=0,r.initData["user"]={userName:"",userEmail:"",userId:20103});var o={headers:{groupId:r.initData["groupId"]}};axios__WEBPACK_IMPORTED_MODULE_3___default.a.get("/o/v1/opencps/site/name",o).then(function(o){var a=o.data;r.siteName=a,console.log(r.siteName),t("setsiteName",a),e(r.initData)}).catch(function(e){console.log(e)})})},updateDynamicReport:function(e,t){var r=e.commit,o=e.state;return new Promise(function(e,a){var n={headers:{groupId:o.groupId,"Content-Type":"text/plain",Accept:"application/json"}},i={};for(var s in t.itemsReports)if(t.itemsReports[s]["code"]===String(t.index)){i["dynamicReportId"]=t.itemsReports[s]["dynamicReportId"],i["userConfig"]=t.itemsReports[s]["userConfig"];break}var l=i["userConfig"];l[t.userId]=t.selected,i["userConfig"]=l;var u=_AdminConfig__WEBPACK_IMPORTED_MODULE_5__["a"].updateDynamicReport.replace("INPUTBODY",JSON.stringify(i).replace(/"/g,'\\"').replace(/'/g,'\\"'));axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/v1/opencps/adminconfig",u,n).then(function(t){console.log(t),e(t.data)}).catch(function(e){r("setsnackbarerror",!0),a(e)})})},doChotSoLieu:function(e,t){e.commit;var r=e.state;return new Promise(function(e,o){var a={headers:{groupId:r.groupId,"Content-Type":"text/plain",Accept:"application/json"},params:{}};for(var n in a["params"][t["key"]]=t["value"],t["data"]){var i=t["data"][n];if(""!==i&&void 0!==i&&null!==i){var s=new Date(i).toLocaleDateString("vi-VN");"Invalid Date"!==s&&13===String(i).length?a.params[n]=s:a.params[n]=i}}axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(t["api"],a).then(function(t){var r=t.data;if(r.data){var o=r.data;e(o)}else e(null)}).catch(function(e){console.log(e),o(e)})})},getDynamicReports:function getDynamicReports(_ref4,reportTypeFilter){var commit=_ref4.commit,state=_ref4.state;return new Promise(function(resolve,reject){var reportType="";if(void 0!==reportTypeFilter&&null!==reportTypeFilter&&(reportType=reportTypeFilter),""!==state.siteName)store.dispatch("loadInitResource").then(function(){var options={headers:{groupId:state.groupId,"Content-Type":"text/plain",Accept:"application/json",reportType:reportType}},body=_AdminConfig__WEBPACK_IMPORTED_MODULE_5__["a"].getDynamicReports;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/v1/opencps/adminconfig",body,options).then(function(response){var serializable=response.data,itemsReportsData=[],indexKey=0;for(var key in serializable["getDynamicReports"]){var current=serializable["getDynamicReports"][key],typeCurrent="dossier";current["reportCode"].startsWith("STATISTIC")&&(typeCurrent="thong_ke");var filterconfigObject=eval("( "+current["filterConfig"]+" )");if(filterconfigObject.hasOwnProperty("groupIds")&&filterconfigObject.hasOwnProperty("exclusive")&&filterconfigObject["exclusive"]){var govCodes=filterconfigObject["groupIds"],exit=!1;for(var _key in govCodes)if(String(state.groupId)===govCodes[_key]["value"]){exit=!0;break}!exit&&(filterconfigObject.hasOwnProperty("exclusive")&&filterconfigObject["exclusive"]||!filterconfigObject.hasOwnProperty("exclusive"))&&govCodes.push({value:parseInt(state.groupId),text:state.siteName}),filterconfigObject["groupIds"]=govCodes}state.reportConfigStatic[indexKey]=eval("( "+current["tableConfig"]+" )"),itemsReportsData.push({code:String(indexKey),document:current["reportCode"],active:!1,type:typeCurrent,title:current["reportName"],filterConfig:filterconfigObject,tableConfig:eval("( "+current["tableConfig"]+" )"),userConfig:eval("( "+current["userConfig"]+" )"),dynamicReportId:current["dynamicReportId"],reportCode:current["reportCode"],reportName:current["reportName"],sharing:current["sharing"]}),indexKey+=1}state.itemsReports=itemsReportsData,console.log("state.itemsReports",state.itemsReports),resolve(itemsReportsData)}).catch(function(e){state.itemsReports=[],commit("setsnackbarerror",!0),reject(e)})});else{var options={headers:{groupId:state.groupId,"Content-Type":"text/plain",Accept:"application/json",reportType:reportType}},body=_AdminConfig__WEBPACK_IMPORTED_MODULE_5__["a"].getDynamicReports;axios__WEBPACK_IMPORTED_MODULE_3___default.a.post("/o/v1/opencps/adminconfig",body,options).then(function(response){var serializable=response.data,itemsReportsData=[],indexKey=0;for(var key in serializable["getDynamicReports"]){var current=serializable["getDynamicReports"][key],typeCurrent="dossier";current["reportCode"].startsWith("STATISTIC")&&(typeCurrent="thong_ke");var filterconfigObject=eval("( "+current["filterConfig"]+" )");if(filterconfigObject.hasOwnProperty("groupIds")&&filterconfigObject.hasOwnProperty("exclusive")&&filterconfigObject["exclusive"]){var govCodes=filterconfigObject["groupIds"],exit=!1;for(var _key2 in govCodes)if(String(state.groupId)===govCodes[_key2]["value"]){exit=!0;break}!exit&&(filterconfigObject.hasOwnProperty("exclusive")&&filterconfigObject["exclusive"]||!filterconfigObject.hasOwnProperty("exclusive"))&&govCodes.push({value:parseInt(state.groupId),text:state.siteName}),filterconfigObject["groupIds"]=govCodes}state.reportConfigStatic[indexKey]=eval("( "+current["tableConfig"]+" )"),itemsReportsData.push({code:String(indexKey),document:current["reportCode"],active:!1,type:typeCurrent,title:current["reportName"],filterConfig:filterconfigObject,tableConfig:eval("( "+current["tableConfig"]+" )"),userConfig:eval("( "+current["userConfig"]+" )"),dynamicReportId:current["dynamicReportId"],reportCode:current["reportCode"],reportName:current["reportName"],sharing:current["sharing"]}),indexKey+=1}state.itemsReports=itemsReportsData,console.log("state.itemsReports",state.itemsReports),resolve(itemsReportsData)}).catch(function(e){state.itemsReports=[],commit("setsnackbarerror",!0),reject(e)})}})},getAgencyReportLists:function(e,t){var r=e.state;return new Promise(function(e,o){store.dispatch("loadInitResource").then(function(){var a={headers:{groupId:r.initData.groupId,Accept:"application/json"},params:{}};for(var n in t["data"]){var i=t["data"][n];if(""!==i&&void 0!==i&&null!==i){var s=new Date(i).toLocaleDateString("vi-VN");"Invalid Date"!==s&&13===String(i).length?a.params[n]=s:a.params[n]=i}}var l=t["govAgency"],u=t["agencyLists"],c=u.filter(function(e){return"0"!==String(e["value"])}),p="";if(p=t["api"],0===u.length)axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(p,a).then(function(r){var o=r.data;o.data?Array.isArray(o.data)?e(o.data):e([o.data]):(console.log("docu","STATISTIC_05"===t.document),"STATISTIC_05"===t.document?e([]):e(null))}).catch(function(e){console.log(e),o(e)});else if("0"===String(l)&&u.length>0){var d=[];for(var f in c)"0"!==String(c[f]["value"])&&(a["headers"]["groupId"]=c[f]["value"],d.push(axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(p,a)));axios__WEBPACK_IMPORTED_MODULE_3___default.a.all(d).then(axios__WEBPACK_IMPORTED_MODULE_3___default.a.spread(function(){for(var t=[],r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];for(var n=0;n<o.length;n++)if(o[n]["data"]["total"]>0)t=t.concat(o[n]["data"]["data"]);else{var i=[{govAgencyCode:c[n]["value"],govAgencyName:c[n]["text"]}];t=t.concat(i)}t.length>0?e(t):e(null)}))}else"0"!==String(l)&&u.length>0&&(a["headers"]["groupId"]=l,axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(p,a).then(function(t){var r=t.data;r.data?e(r.data):e(null)}).catch(function(e){console.log(e),o(e)}))})})},doStatisticReportPrint:function(e,t){var r=e.state;return new Promise(function(e,o){store.dispatch("loadInitResource").then(function(){axios__WEBPACK_IMPORTED_MODULE_3___default()({method:"PUT",url:"/o/rest/v2_1/statistics/report/"+t.document,headers:{groupId:r.initData.groupId},responseType:"blob",data:t.data}).then(function(r){var o=r.data;if(t["download"])FileSaver.saveAs(o,(new Date).getTime()+".xls");else{var a=window.URL.createObjectURL(o);e(a)}}).catch(function(e){o(e)})})})},doExportXlsx:function(e,t){e.state;return new Promise(function(e,r){var o=new FormData;o.append("files",t["file"]),window.$.support.cors=!0,window.$.ajax({url:"https://cors-anywhere.herokuapp.com/https://www.cleverpdf.com/pdf/uploadFiles",headers:{"X-Requested-With":"XMLHttpRequest"},cache:!1,contentType:!1,processData:!1,data:o,crossDomain:!0,type:"POST",success:function(e){console.log(e);var t=new FormData;t.append("url",e["url"]),t.append("index",e["index"]),t.append("pid",1),t.append("oid",3),t.append("status",0),t.append("pwd",""),t.append("formatv1",2),t.append("formatv2",2);e["fileName"];setTimeout(function(){window.$.ajax({url:"https://cors-anywhere.herokuapp.com/https://www.cleverpdf.com/pdf/doProcess.do",headers:{"X-Requested-With":"XMLHttpRequest"},cache:!1,contentType:!1,processData:!1,data:t,crossDomain:!0,type:"POST",success:function(e){setTimeout(function(){console.log(e),console.log("https://www.cleverpdf.com/"+e["index"]+"/blob.xlsx"),window.open("https://www.cleverpdf.com/"+e["index"]+"/blob.xlsx")},1e3)}})},1e3)}})})},doExportXlsxddd:function(e,t){e.state;return new Promise(function(e,t){var r=new FormData;r.append("files",window.$("#filefile")[0].files[0]),window.$.support.cors=!0,window.$.ajax({url:"https://cors-anywhere.herokuapp.com/https://www.cleverpdf.com/pdf/uploadFiles",headers:{"X-Requested-With":"XMLHttpRequest"},cache:!1,contentType:!1,processData:!1,data:r,crossDomain:!0,type:"POST",success:function(e){console.log(e);var t=new FormData;t.append("url",e["url"]),t.append("index",e["index"]),t.append("pid",1),t.append("oid",3),t.append("status",0),t.append("pwd",""),t.append("formatv1",2),t.append("formatv2",2);e["fileName"];setTimeout(function(){window.$.ajax({url:"https://cors-anywhere.herokuapp.com/https://www.cleverpdf.com/pdf/doProcess.do",headers:{"X-Requested-With":"XMLHttpRequest"},cache:!1,contentType:!1,processData:!1,data:t,crossDomain:!0,type:"POST",success:function(e){setTimeout(function(){console.log(e),console.log("https://www.cleverpdf.com/"+e["index"]+"/blob.xlsx"),window.open("https://www.cleverpdf.com/"+e["index"]+"/blob.xlsx")},1e3)}})},1e3)}})})},doExportXlsx2:function(e,t){e.state;return new Promise(function(e,t){var r=new FormData;r.append("SuccessPage"," /Success/{ID}"),r.append("OutputFormat","Word"),r.append("File",window.$("#filefile")[0].files[0]),r.append("ReconstructionMode","flowing"),r.append("DetectTables",!0),r.append("DetectLists","detect"),r.append("HeaderAndFooterMode","detect"),r.append("AnnotRecoveryType","comment"),r.append("DocFormat","Word"),r.append("AutoRotate",!0),r.append("TextRecoveryMode",0),r.append("NSEMode",0),r.append("ocrLanguage","au"),r.append("Password",""),r.append("DynamicFile",window.$("#filefile")[0].files[0]),window.$.support.cors=!0,window.$.ajax({url:"https://simplypdf.com/api/convert",dataType:"jsonp",cache:!1,contentType:!1,processData:!1,data:r,crossDomain:!0,type:"POST",success:function(e){console.log(e)}})})},getExcelReportFromServer:function(e,t){var r=e.state;return new Promise(function(e,o){var a={headers:{groupId:r.groupId,"Content-Type":"x-www-form-urlencoded",Accept:"application/json"},responseType:"blob"},n=new URLSearchParams;n.append("data",t.data),axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(r.endPointApi+"/statistics/dossiers/export",n,a).then(function(r){console.log(r);var o=r.headers["content-disposition"],a=o.split("filename=")[1]||t.fileName;a=a.split('"').join("");var n=document.createElement("a");document.body.appendChild(n),n.style="display: none";var i=window.URL.createObjectURL(r.data);n.href=i,n.download=a,n.click(),window.URL.revokeObjectURL(i),e(r.data)}).catch(function(e){console.log(e),o(e)})})}},mutations:{setInitData:function(e,t){e.initData=t},setsnackbarerror:function(e,t){e.snackbarerror=t},setsnackbarsocket:function(e,t){e.snackbarsocket=t},setpullCounter:function(e,t){e.pullCounter=t},setdataSocket:function(e,t){e.dataSocket=t},setselected:function(e,t){e.selected=t},setselectedText:function(e,t){e.selectedText=t},setreportType:function(e,t){e.reportType=t},setgroupType:function(e,t){e.groupType=t},setsiteName:function(e,t){e.siteName=t},setitemsReports:function(e,t){e.itemsReports=t},setreportConfigStatic:function(e,t){e.reportConfigStatic=t}},getters:{getsnackbarerror:function(e){return e.snackbarerror},getsnackbarsocket:function(e){return e.snackbarsocket},getDeliverableTypes:function(e){return e.getDeliverableTypes},getContentFile:function(e){return e.getContentFile},getContentFileSimple:function(e){return e.getContentFileSimple},pullCounter:function(e){return e.pullCounter},dataSocket:function(e){return e.dataSocket},selected:function(e){return e.selected},selectedText:function(e){return e.selectedText},reportType:function(e){return e.reportType},groupType:function(e){return e.groupType},siteName:function(e){return e.siteName},itemsReports:function(e){return e.itemsReports},reportConfigStatic:function(e){return e.reportConfigStatic}}})},"56d7":function(e,t,r){"use strict";r.r(t);r("0f18");var o=r("a026"),a=r("bb71");r("74ef");o["a"].use(a["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{class:e.hiddenAside?"px-3":"",attrs:{id:"app_dynamic_report"}},[e.hiddenAside?e._e():r("v-navigation-drawer",{attrs:{app:"",clipped:"",floating:"",width:"300"}},[r("div",{staticClass:"drawer__filter"},[r("v-list",{staticClass:"report_list",staticStyle:{padding:"0"},attrs:{dense:""}},e._l(e.itemsReports,function(t,o){return r("v-list-tile",{key:o,attrs:{to:"/bao-cao/"+o+"?reportType="+e.reportTypeFilter}},[r("v-list-tile-action",[String(o)===String(e.index)?r("v-icon",{attrs:{color:"blue darken-3"}},[e._v("play_arrow")]):r("v-icon",[e._v("description")])],1),r("v-list-tile-content",[r("v-list-tile-title",{staticStyle:{"font-size":"13px"},attrs:{title:t.reportName}},[e._v(e._s(t.reportName))])],1)],1)}),1)],1)]),r("v-content",{style:e.hiddenAside?"background: #ffffff":""},[r("router-view")],1),r("v-snackbar",{attrs:{bottom:!1,left:!1,"multi-line":!1,right:!0,timeout:2e3,top:!0,vertical:!1,color:"red darken-3"},model:{value:e.snackbarerror,callback:function(t){e.snackbarerror=t},expression:"snackbarerror"}},[e._v("\n    Yêu cầu thực hiện thất bại\n    "),r("v-btn",{attrs:{icon:""},on:{click:function(t){e.closeError()}}},[r("v-icon",[e._v("clear")])],1)],1),r("v-snackbar",{attrs:{bottom:!0,left:!1,"multi-line":!0,right:!1,timeout:0,top:!0,vertical:!1,color:"red darken-3"},model:{value:e.snackbarsocket,callback:function(t){e.snackbarsocket=t},expression:"snackbarsocket"}},[r("v-progress-circular",{attrs:{size:20,width:1,color:"white",indeterminate:""}}),e._v("\n     \n    Mất kết nối, tự động kết nối lại trong giây lát ... \n    \n    "),r("v-btn",{attrs:{icon:""},on:{click:function(t){e.reloadPage()}}},[r("v-icon",[e._v("replay")])],1)],1)],1)},i=[],s=r("bbd0"),l={props:["index"],data:function(){return{hiddenAside:!1,dialog:!1,drawer:null,dataSocket:{},support:s,itemsReportsConfig:[],itemsGroups:[{value:"domain",text:"lĩnh vực"},{value:"gov",text:"đơn vị"}],userConfig:[],reportTypeFilter:""}},computed:{itemsReports:function(){return this.$store.getters.itemsReports},items:function(){return this.$store.getters.getDeliverableTypes},groupType:{get:function(){return this.$store.getters.groupType},set:function(e){this.$store.commit("setgroupType",e)}},reportType:{get:function(){return this.$store.getters.reportType},set:function(e){this.$store.commit("setreportType",e)}},selected:{get:function(){return this.$store.getters.selected},set:function(e){this.$store.commit("setselected",e)}},selectedText:{get:function(){return this.$store.getters.selectedText},set:function(e){this.$store.commit("setselectedText",e)}},snackbarerror:{get:function(){return this.$store.getters.getsnackbarerror},set:function(e){this.$store.commit("setsnackbarerror",e)}},snackbarsocket:{get:function(){return this.$store.getters.getsnackbarsocket},set:function(e){this.$store.commit("setsnackbarsocket",e)}}},created:function(){var e=this;e.$nextTick(function(){e.$route.query.hasOwnProperty("doreport")?e.hiddenAside=!0:e.hiddenAside=!1,void 0!==e.$route.query.reportType&&null!==e.$route.query.reportType&&(e.reportTypeFilter=e.$route.query.reportType),e.$store.dispatch("getDynamicReports",e.reportTypeFilter).then(function(t){if(e.itemsReportsConfig=[],e.userConfig=[],"0"!==String(e.index)){for(var r in e.itemsReports)if(e.itemsReports[r]["code"]===String(e.index)){if(e.reportType=e.itemsReports[r]["document"],e.itemsReportsConfig=e.itemsReports[r]["filterConfig"]["reportConfig"],""!==e.itemsReports[r]["userConfig"]){var o=e.itemsReports[r]["userConfig"];o.hasOwnProperty(e.getUserId())&&(e.userConfig=o[e.getUserId()])}break}}else if(e.reportType=e.itemsReports[0]["document"],e.itemsReportsConfig=e.itemsReports[0]["filterConfig"]["reportConfig"],""!==e.itemsReports[0]["userConfig"]){var a=e.itemsReports[0]["userConfig"];a.hasOwnProperty(e.getUserId())&&(e.userConfig=a[e.getUserId()])}if(e.selected=[],e.userConfig.length>0)e.selected=e.userConfig;else for(var n in e.itemsReportsConfig)e.itemsReportsConfig[n]["selected"]&&e.selected.push(e.itemsReportsConfig[n]["value"])})})},methods:{redirectFilter:function(e){this.$router.push(e+"?state_change="+Math.floor(100*Math.random())+1)},closeError:function(){this.$store.commit("setsnackbarerror",!1)},reloadPage:function(){window.location.reload(!0)},deliverableRouter:function(e){console.log(e)},resetConfig:function(){var e=this;for(var t in e.selected=[],e.itemsReportsConfig)e.itemsReportsConfig[t]["selected"]&&e.selected.push(e.itemsReportsConfig[t]["value"])},changeReportType:function(e){var t=this;for(var r in t.itemsReportsConfig=[],t.itemsReports)if(t.itemsReports[r]["document"]===e){if(t.itemsReportsConfig=t.itemsReports[r]["filterConfig"]["reportConfig"],""!==t.itemsReports[r]["userConfig"]){var o=t.itemsReports[r]["userConfig"];o.hasOwnProperty(t.getUserId())&&(t.userConfig=o[t.getUserId()])}if(t.selected=[],t.userConfig.length>0)t.selected=t.userConfig;else for(var a in t.itemsReportsConfig)t.itemsReportsConfig[a]["selected"]&&t.selected.push(t.itemsReportsConfig[a]["value"]);t.$router.push("/bao-cao/"+t.itemsReports[r]["code"]);break}}}},u=l,c=r("2877"),p=r("6544"),d=r.n(p),f=r("7496"),m=r("8336"),g=r("549c"),v=r("132d"),_=r("8860"),y=r("ba95"),h=r("40fe"),C=r("5d23"),x=r("f774"),w=r("490a"),T=r("2db4"),R=Object(c["a"])(u,n,i,!1,null,null,null);R.options.__file="App.vue";var b=R.exports;d()(R,{VApp:f["a"],VBtn:m["a"],VContent:g["a"],VIcon:v["a"],VList:_["a"],VListTile:y["a"],VListTileAction:h["a"],VListTileContent:C["a"],VListTileTitle:C["b"],VNavigationDrawer:x["a"],VProgressCircular:w["a"],VSnackbar:T["a"]});var D=r("8c4f"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("\n  13123\n")])},S=[],O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-chitiet"})},E=[],P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},I=[],L={data:function(){return{}}},V=L,X=Object(c["a"])(V,P,I,!1,null,null,null);X.options.__file="TiepNhanHoSo_ThanhPhanHoSo.vue";var M=X.exports,A={props:["index","id"],components:{"thanh-phan-ho-so":M},data:function(){return{}}},B=A,K=Object(c["a"])(B,O,E,!1,null,null,null);K.options.__file="XemChiTietHoSoDetailCanBo.vue";var $=K.exports,N={props:["id","formCode"],components:{"xem-chi-tiet-ho-so-detail-can-bo":$},data:function(){return{initData:null,step:""}}},U=N,j=Object(c["a"])(U,k,S,!1,null,null,null);j.options.__file="DetailForward.vue";var W=j.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[r("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1)],1)},H=[],q={},G=q,z=r("a523"),J=r("0e8f"),Y=r("a722"),Z=Object(c["a"])(G,F,H,!1,null,null,null);Z.options.__file="NotFound.vue";var Q=Z.exports;d()(Z,{VContainer:z["a"],VFlex:J["a"],VLayout:Y["a"],VProgressCircular:w["a"]});var ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("div",{staticClass:"form-chitiet"},[e.hiddenAside?e._e():r("div",{staticClass:"row-header"},[r("div",{staticClass:"background-triangle-big"},[r("span",[e._v(e._s(e.nameReport))])]),r("div",{staticClass:"layout row wrap header_tools row-blue"},[r("div",{staticClass:"flex xs12 pl-3 text-ellipsis text-bold"},[r("v-layout",{staticClass:"chart__report",attrs:{wrap:""}},[r("v-flex",{staticClass:"px-2 text-right"},[r("v-btn",{staticClass:"mx-0 my-0",style:e.showGuilds?"color: #1565c0":"",attrs:{flat:""},nativeOn:{click:function(t){e.showGuilds=!e.showGuilds}}},[r("v-icon",[e._v("receipt")]),e._v("   Hướng dẫn PDF -> Excel\r\n              ")],1),e._l(e.buttons,function(t,o){return e.buttonsShow?r("v-select",{key:o,staticClass:"btn__chot",staticStyle:{float:"right"},attrs:{items:t["source"],label:t["label"],"item-text":"name","item-value":"value","single-line":""},on:{change:function(r){e.doChotSoLieu(r,t)}},model:{value:e.buttonsVal,callback:function(t){e.buttonsVal=t},expression:"buttonsVal"}}):e._e()}),e.customize?r("v-btn",{staticClass:"mx-0 my-0",attrs:{flat:""},nativeOn:{click:function(t){e.showConfig=!e.showConfig}}},[e.showConfig?r("v-icon",[e._v("reply")]):r("v-icon",[e._v("settings")]),e._v("  \r\n                "),e.showConfig?r("span",[e._v("Quay lại")]):r("span",[e._v("Tuỳ chọn")])],1):e._e()],2)],1)],1)])]),e.hiddenAside?r("v-flex",{staticClass:"xs12",staticStyle:{"background-color":"#004b94 !important",height:"36px",padding:"9px 15px","font-weight":"600",color:"white"}},[r("span",[e._v("Đánh giá hài lòng của người sử dụng đối với dịch vụ công trực tuyến mức độ 3 và 4")]),r("div",{staticClass:"d-inline-block right",staticStyle:{"margin-top":"-5px"}},[r("v-tooltip",{attrs:{top:""}},[r("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:e.goToThongKe},slot:"activator"},[r("v-icon",{attrs:{size:"20",color:"white"}},[e._v("assignment")])],1),r("span",[e._v("Báo cáo tổng hợp")])],1)],1)]):e._e(),r("v-layout",{staticClass:"filter_menu mt-4",attrs:{row:"",wrap:""}},[e.agencyLists.length>1?r("v-flex",{staticClass:"px-3",attrs:{xs6:"",sm2:""}},[r("v-autocomplete",{attrs:{items:e.agencyLists,label:"Chọn đơn vị","item-text":"text","item-value":"value"},model:{value:e.govAgency,callback:function(t){e.govAgency=t},expression:"govAgency"}})],1):e._e(),e.groupBy.length>1?r("v-flex",{staticClass:"px-3",attrs:{xs6:"",sm2:""}},[r("v-autocomplete",{attrs:{items:e.groupBy,label:"Nhóm dữ liệu","item-text":"label","item-value":"key"},model:{value:e.groupByVal,callback:function(t){e.groupByVal=t},expression:"groupByVal"}})],1):e._e(),e._l(e.filters,function(t,o){return r("v-flex",{key:o,staticClass:"px-3",attrs:{xs12:"",sm2:""}},["date"===t["type"]&&e.showPicker?r("datetime-picker",{attrs:{item:t,"data-value":e.data[t.key],"data-all":e.data},on:{change:function(r){e.reloadPickerChange(t.key)}},model:{value:e.data[t.key],callback:function(r){e.$set(e.data,t.key,r)},expression:"data[item.key]"}}):e._e(),"text"===t["type"]?r("v-text-field",{attrs:{label:t["label"]},model:{value:e.data[t.key],callback:function(r){e.$set(e.data,t.key,r)},expression:"data[item.key]"}}):e._e(),"select"===t["type"]?r("v-select",{attrs:{items:t["source"],label:t["label"],"item-value":"value","item-text":"name"},model:{value:e.data[t.key],callback:function(r){e.$set(e.data,t.key,r)},expression:"data[item.key]"}}):e._e()],1)}),e.hiddenAside?r("v-flex",{attrs:{xs12:"",sm6:""}},[r("div",{staticClass:"d-inline-block right"},[r("v-btn",{attrs:{dark:"",color:"blue darken-3"},nativeOn:{click:function(t){e.doCreateReport(!1)}}},[r("v-icon",[e._v("library_books")]),e._v("   Tạo báo cáo")],1),r("v-btn",{staticClass:"mx-3 my-0",attrs:{dark:"",color:"blue darken-3"},nativeOn:{click:function(t){e.doCreateReport(!0)}}},[r("v-icon",[e._v("save_alt")]),e._v("   Tải xuống Excel\r\n          ")],1),e.exportXML?r("v-btn",{attrs:{dark:"",color:"blue darken-3"},nativeOn:{click:function(t){return e.doDynamicReportXML(t)}}},[e._v("exportXML")]):e._e()],1)]):e._e()],2),e.showConfig?r("v-layout",{staticClass:"filter_menu my-3 px-4",attrs:{"align-start":"","justify-start":"",row:"",wrap:""}},e._l(e.itemsReportsConfig,function(t,o){return r("v-flex",{key:o,staticClass:"mx-2"},[e.reportType.startsWith("STATISTIC")?e._e():r("v-checkbox",{attrs:{label:t.text},on:{change:function(t){e.changeConfig(o)}},model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"item.selected"}})],1)}),1):e._e(),e.hiddenAside?e._e():r("v-layout",{staticClass:"mx-2 my-2",attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{dark:"",color:"blue darken-3"},nativeOn:{click:function(t){e.doCreateReport(!1)}}},[r("v-icon",[e._v("library_books")]),e._v("   Tạo báo cáo")],1),r("v-btn",{staticClass:"mx-3 my-0",attrs:{dark:"",color:"blue darken-3"},nativeOn:{click:function(t){e.doCreateReport(!0)}}},[r("v-icon",[e._v("save_alt")]),e._v("   Tải xuống Excel\r\n        ")],1),e.exportXML?r("v-btn",{attrs:{dark:"",color:"blue darken-3"},nativeOn:{click:function(t){return e.doDynamicReportXML(t)}}},[e._v("exportXML")]):e._e()],1)],1),r("div",[e.showGuilds?r("vue-friendly-iframe",{attrs:{src:"/documents/"+e.groupId+"/0/hdsd.pdf"}}):e._e(),null===e.pdfBlob||void 0===e.pdfBlob||""===e.pdfBlob||e.showGuilds?e._e():r("vue-friendly-iframe",{attrs:{src:e.pdfBlob}}),e.showErrorData?r("div",{staticClass:"mx-3 my-4"},[r("v-alert",{attrs:{value:!0,outline:"",color:"info",icon:"info"}},[e._v("\r\n          Không có dữ liệu báo cáo.\r\n        ")])],1):e._e(),e.isShowLoading?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[r("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1):e._e()],1)],1)])},te=[],re=r("e3ce"),oe=re["a"],ae=r("0798"),ne=r("c6a6"),ie=r("ac7c"),se=r("4bd4"),le=r("b56d"),ue=r("2677"),ce=r("3a2f"),pe=Object(c["a"])(oe,ee,te,!1,null,null,null);pe.options.__file="Landing.vue";var de=pe.exports;d()(pe,{VAlert:ae["a"],VAutocomplete:ne["a"],VBtn:m["a"],VCheckbox:ie["a"],VFlex:J["a"],VForm:se["a"],VIcon:v["a"],VLayout:Y["a"],VProgressCircular:w["a"],VSelect:le["a"],VTextField:ue["a"],VTooltip:ce["a"]});var fe=[{path:"/bao-cao/:index",name:"LandingBaocao",component:de,props:!0},{path:"/danh-sach-ho-so/:index",name:"Landing",component:function(){return r.e("Landing").then(r.bind(null,"306c"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:function(){return r.e("TiepNhanHoSoDetail").then(r.bind(null,"d129"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:function(){return r.e("HoanThienBoSungHoSoDetail").then(r.bind(null,"a35c"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:W,props:!0},{path:"*",name:"NotFound",component:Q}];o["a"].use(D["a"]);var me=new D["a"]({routes:fe}),ge=me,ve=r("4360"),_e=r("967d"),ye=r("bc3a"),he=r.n(ye);o["a"].use(_e["default"]);var Ce=void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0;he.a.defaults.withCredentials=!0,he.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",he.a.defaults.headers.common["groupId"]=Ce,o["a"].config.productionTip=!0,o["a"].mixin({methods:{getScopeGroupId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0},getAuthToken:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.Liferay.authToken:""},getUserId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getUserId():0}}}),new o["a"]({router:ge,store:ve["a"],created:function(){var e=this;e.$nextTick(function(){if(e.$store.dispatch("loadInitResource"),window.location.href.endsWith("#/")){var t="";window.location.href.includes("/so-theo-doi")&&(t="?reportType=register"),e.$router.push("/bao-cao/0"+t)}})},render:function(e){return e(b)}}).$mount("#app_dynamic_report")},"74ef":function(e,t,r){},"830f":function(module,__webpack_exports__,__webpack_require__){"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],o=!0,a=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done);o=!0)if(r.push(i.value),t&&r.length===t)break}catch(l){a=!0,n=l}finally{try{o||null==s["return"]||s["return"]()}finally{if(a)throw n}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}__webpack_exports__["a"]={data:function(){return{toDateFormatted:null,toDate:null,rawDate:null,maxDate:"",minDate:"",rules:{required:function(e){return!!e||"Bắt buộc phải nhập."},number:function(e){var t=/^\d+$/;return t.test(e)||"Bắt buộc phải nhập kiểu số."},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Sai định dạng thư điện tử."}}}},props:["value","item","dataValue","dataAll"],created:function(){var e=this;e.$nextTick(function(){if(e.rawDate=e.parseDate(e.dataValue),e.item.hasOwnProperty("before")){var t=e.dataAll[e.item["before"]],r=e.parseDate(t);e.maxDate=r}else e.maxDate=null;if(e.item.hasOwnProperty("after")){var o=e.dataAll[e.item["after"]],a=e.parseDate(o);e.minDate=a}else e.minDate=null})},watch:{toDate:function(e){var t=this;t.toDateFormatted=t.formatDate(e),t.rawDate=t.parseDate(t.toDateFormatted),t.$emit("input",new Date(e).getTime()),t.$emit("change",new Date(e).getTime())},$route:function(e,t){var r=this;if(r.rawDate=r.parseDate(r.dataValue),r.item.hasOwnProperty("before")){var o=r.dataAll[r.item["before"]],a=r.parseDate(o);r.maxDate=a}else r.maxDate=null;if(r.item.hasOwnProperty("after")){var n=r.dataAll[r.item["after"]],i=r.parseDate(n);r.minDate=i}else r.minDate=null}},methods:{formatDate:function(e){if(!e)return null;var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},parseDate:function(e){if(!e)return null;var t=e.split("/"),r=_slicedToArray(t,3),o=r[0],a=r[1],n=r[2];return"".concat(n,"-").concat(a.padStart(2,"0"),"-").concat(o.padStart(2,"0"))},processRules:function processRules(rulesStr){return eval("( "+rulesStr+" )")}}}},bbd0:function(e){e.exports={defaultData:{betimesCount:0,cancelledCount:0,companyId:0,deniedCount:0,domainCode:"",domainName:"",doneCount:0,govAgencyCode:"",govAgencyName:"",groupId:"",insideCount:0,interoperatingCount:0,month:0,onegateCount:0,onlineCount:0,ontimeCount:0,ontimePercentage:0,outsideCount:0,overdueCount:0,overtimeCount:0,overtimeInside:0,overtimeOutside:0,processCount:0,processingCount:0,receivedCount:0,releaseCount:0,releasingCount:0,remainingCount:0,reporting:!1,totalCount:0,undueCount:0,unresolvedCount:0,waitingCount:0,year:0}}},df87:function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-btn",{staticClass:"mx-0 my-0",attrs:{flat:""},nativeOn:{click:function(t){return e.doDownloadXlsx(t)}}},[r("v-icon",[e._v("receipt")]),e._v("   Tải Excel\n")],1)},a=[],n=(r("7ea2"),{props:{fields:void 0,data:void 0,downloadname:"export.pdf",pdfblob:null},data:function(){return{dataToExport:"",myPdfToConvert:null}},created:function(){var e=this;e.$nextTick(function(){e.myPdfToConvert=new Blob([e.pdfblob],{type:"application/pdf"})})},computed:{downloadUrl:function(){return this.data.length>0?"data:text/csv;charset=UTF-8,%EF%BB%BF"+encodeURIComponent(this.dataToExport):"javascript:void(0);"}},methods:{doDownloadXlsx:function(){var e=this,t={file:e.myPdfToConvert};console.log(t),e.$store.dispatch("doExportXlsx",t)}}}),i=n,s=r("2877"),l=r("6544"),u=r.n(l),c=r("8336"),p=r("132d"),d=Object(s["a"])(i,o,a,!1,null,null,null);d.options.__file="CsvDownload.vue";t["a"]=d.exports;u()(d,{VBtn:c["a"],VIcon:p["a"]})},e3ce:function(module,__webpack_exports__,__webpack_require__){"use strict";var vue_friendly_iframe__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("6c39"),vue_friendly_iframe__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(vue_friendly_iframe__WEBPACK_IMPORTED_MODULE_0__),pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e499"),pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_1__),pdfmake_build_vfs_fonts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4ebb"),pdfmake_build_vfs_fonts__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(pdfmake_build_vfs_fonts__WEBPACK_IMPORTED_MODULE_2__),_DatetimePicker_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("19cd"),_CsvDownload_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("df87"),jstoxml__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("fd52"),jstoxml__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(jstoxml__WEBPACK_IMPORTED_MODULE_5__);function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],o=!0,a=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done);o=!0)if(r.push(i.value),t&&r.length===t)break}catch(l){a=!0,n=l}finally{try{o||null==s["return"]||s["return"]()}finally{if(a)throw n}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_1___default.a.vfs=pdfmake_build_vfs_fonts__WEBPACK_IMPORTED_MODULE_2___default.a.pdfMake.vfs;var jsonMapper=__webpack_require__("8092"),FileSaver=__webpack_require__("c28d");__webpack_exports__["a"]={props:["index"],components:{"vue-friendly-iframe":vue_friendly_iframe__WEBPACK_IMPORTED_MODULE_0___default.a,DatetimePicker:_DatetimePicker_vue__WEBPACK_IMPORTED_MODULE_3__["a"],"vue-csv-downloader":_CsvDownload_vue__WEBPACK_IMPORTED_MODULE_4__["a"]},data:function(){return{hiddenAside:!1,groupId:window.themeDisplay?window.themeDisplay.getScopeGroupId():"",doExportExcel:!1,showGuilds:!1,showPicker:!0,showErrorData:!1,showCSVDownload:!1,csvExport:[],fields:[],valid:!1,api:"",onlines:[],online:"",itemsReportsConfig:[],report1Def:{},docDefinition:{},isDVC:!1,isCallBack:!0,fromDate:null,fromDateShow:!1,menufromDate:!1,fromDateFormatted:null,toDate:null,toDateShow:!1,menutoDate:!1,toDateMin:null,toDateFormatted:null,danhSachBaoCaos:[],years:[],year:(new Date).getFullYear()+"",months:[],month:0,agencyLists:[],govAgency:0,danhSachBaoCao:[],pdfBlob:null,isShowLoading:!1,isCallData:!1,nameReport:"",showConfig:!1,filters:[],data:{},customize:!1,groupBy:[],groupByVal:"",dataReportXX:"",buttons:[],buttonsVal:"",buttonsShow:!1,noHeader:!0,exportXML:!1,jsonMapperJson:{}}},computed:{itemsReports:function(){return this.$store.getters.itemsReports},reportConfigStatic:function(){return this.$store.getters.reportConfigStatic},selected:{get:function(){return this.$store.getters.selected},set:function(e){this.$store.commit("setselected",e)}},reportType:{get:function(){return this.$store.getters.reportType},set:function(e){this.$store.commit("setreportType",e)}},groupType:{get:function(){return this.$store.getters.groupType},set:function(e){this.$store.commit("setgroupType",e)}}},created:function(){var e=this;e.$nextTick(function(){var t=e.$router.history.current.query;t.hasOwnProperty("doreport")?e.hiddenAside=!0:e.hiddenAside=!1,setTimeout(function(){if(e.showErrorData=!1,e.showCSVDownload=!1,e.agencyLists=[],e.api="",e.filters=[],e.customize=!1,e.data={},e.groupBy=[],e.itemsReportsConfig=[],e.dataReportXX="",e.buttons=[],e.buttonsVal="",e.buttonsShow=!1,e.exportXML=!1,e.itemsReports[e.index]){if(e.nameReport=e.itemsReports[e.index]["reportName"],e.itemsReports[e.index]["filterConfig"].hasOwnProperty("reportConfig")&&(e.itemsReportsConfig=e.itemsReports[e.index]["filterConfig"]["reportConfig"]),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("customize")&&(e.customize=e.itemsReports[e.index]["filterConfig"]["customize"]),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("autoHeader")&&(e.noHeader=e.itemsReports[e.index]["filterConfig"]["autoHeader"]),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("groupBy")){e.groupBy=e.itemsReports[e.index]["filterConfig"]["groupBy"];var r=e.groupBy[0]["key"];for(var o in e.groupBy)if(e.groupBy[o]["selected"]){r=e.groupBy[o]["key"];break}e.groupByVal=r}if(e.itemsReports[e.index]["filterConfig"].hasOwnProperty("groupIds")&&(e.agencyLists=e.itemsReports[e.index]["filterConfig"]["groupIds"],e.agencyLists.length>0)){var a=e.agencyLists[0]["value"];for(var n in e.agencyLists)if(e.agencyLists[n]["selected"]){a=e.agencyLists[n]["value"];break}t.hasOwnProperty("groupId")&&t["groupId"]?e.govAgency=Number(t["groupId"]):e.govAgency=a}for(var i in e.itemsReports[e.index]["filterConfig"].hasOwnProperty("api")&&(e.api=e.itemsReports[e.index]["filterConfig"]["api"]),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("filters")&&(e.filters=e.itemsReports[e.index]["filterConfig"]["filters"]),e.filters)"select"!==e.filters[i]["type"]&&"date"!==e.filters[i]["type"]||(e.data[e.filters[i]["key"]]=e.filters[i]["value"],"date"===e.filters[i]["type"]&&t.hasOwnProperty(e.filters[i]["key"])&&t[e.filters[i]["key"]]&&(e.data[e.filters[i]["key"]]=t[e.filters[i]["key"]]));for(var s in e.itemsReports[e.index]["filterConfig"].hasOwnProperty("buttons")&&(e.buttons=e.itemsReports[e.index]["filterConfig"]["buttons"],e.buttons.length>0&&setTimeout(function(){e.buttonsShow=!0},100)),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("exportXML")&&(e.exportXML=e.itemsReports[e.index]["filterConfig"]["exportXML"]),e.report1Def={},e.itemsReportsConfig)e.report1Def[e.itemsReportsConfig[s]["value"]]=e.itemsReportsConfig[s]["text"];e.reportType=e.itemsReports[e.index]["document"],e.showConfig&&(e.showConfig=!1,setTimeout(function(){e.showConfig=!0},200)),e.pdfBlob=""}t.hasOwnProperty("doreport")&&e.doCreateReport(!1)},1e3)})},watch:{$route:function(e,t){var r=this;if(r.showErrorData=!1,r.showCSVDownload=!1,r.itemsReportsConfig=[],r.groupBy=[],r.customize=!1,r.data={},r.api="",r.filters=[],r.report1Def={},r.dataReportXX="",r.buttons=[],r.buttonsVal="",r.buttonsShow=!1,r.exportXML=!1,r.nameReport=r.itemsReports[r.index]?r.itemsReports[r.index]["reportName"]:"",r.itemsReports[r.index]["filterConfig"].hasOwnProperty("reportConfig")&&(r.itemsReportsConfig=r.itemsReports[r.index]["filterConfig"]["reportConfig"]),r.itemsReports[r.index]["filterConfig"].hasOwnProperty("customize")&&(r.customize=r.itemsReports[r.index]["filterConfig"]["customize"]),r.itemsReports[r.index]["filterConfig"].hasOwnProperty("autoHeader")?r.noHeader=r.itemsReports[r.index]["filterConfig"]["autoHeader"]:r.noHeader=!0,r.itemsReports[r.index]["filterConfig"].hasOwnProperty("groupBy")){r.groupBy=r.itemsReports[r.index]["filterConfig"]["groupBy"];var o=r.groupBy[0]["key"];for(var a in r.groupBy)if(r.groupBy[a]["selected"]){o=r.groupBy[a]["key"];break}r.groupByVal=o}if(r.itemsReports[r.index]["filterConfig"].hasOwnProperty("groupIds")&&(r.agencyLists=r.itemsReports[r.index]["filterConfig"]["groupIds"],r.agencyLists.length>0)){var n=r.agencyLists[0]["value"];for(var i in r.agencyLists)if(r.agencyLists[i]["selected"]){n=r.agencyLists[i]["value"];break}r.govAgency=n}for(var s in r.itemsReports[r.index]["filterConfig"].hasOwnProperty("api")&&(r.api=r.itemsReports[r.index]["filterConfig"]["api"]),r.itemsReports[r.index]["filterConfig"].hasOwnProperty("filters")&&(r.filters=r.itemsReports[r.index]["filterConfig"]["filters"]),r.itemsReportsConfig)r.report1Def[r.itemsReportsConfig[s]["value"]]=r.itemsReportsConfig[s]["text"];for(var l in r.reportType=r.itemsReports[r.index]["document"],r.pdfBlob="",r.filters)"select"!==r.filters[l]["type"]&&"date"!==r.filters[l]["type"]||(r.data[r.filters[l]["key"]]=r.filters[l]["value"]);r.itemsReports[r.index]["filterConfig"].hasOwnProperty("buttons")&&(r.buttons=r.itemsReports[r.index]["filterConfig"]["buttons"],r.buttons.length>0&&setTimeout(function(){r.buttonsShow=!0},100)),r.itemsReports[r.index]["filterConfig"].hasOwnProperty("exportXML")&&(r.exportXML=r.itemsReports[r.index]["filterConfig"]["exportXML"]),r.showConfig&&(r.showConfig=!1,setTimeout(function(){r.showConfig=!0},200))},itemsReports:function(){var e=this;setTimeout(function(){if(e.showErrorData=!1,e.showCSVDownload=!1,e.agencyLists=[],e.api="",e.filters=[],e.customize=!1,e.data={},e.groupBy=[],e.itemsReportsConfig=[],e.dataReportXX="",e.buttons=[],e.buttonsVal="",e.buttonsShow=!1,e.exportXML=!1,e.itemsReports[e.index]){if(e.nameReport=e.itemsReports[e.index]["reportName"],e.itemsReports[e.index]["filterConfig"].hasOwnProperty("reportConfig")&&(e.itemsReportsConfig=e.itemsReports[e.index]["filterConfig"]["reportConfig"]),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("customize")&&(e.customize=e.itemsReports[e.index]["filterConfig"]["customize"]),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("autoHeader")&&(e.noHeader=e.itemsReports[e.index]["filterConfig"]["autoHeader"]),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("groupBy")){e.groupBy=e.itemsReports[e.index]["filterConfig"]["groupBy"];var t=e.groupBy[0]["key"];for(var r in e.groupBy)if(e.groupBy[r]["selected"]){t=e.groupBy[r]["key"];break}e.groupByVal=t}if(e.itemsReports[e.index]["filterConfig"].hasOwnProperty("groupIds")&&(e.agencyLists=e.itemsReports[e.index]["filterConfig"]["groupIds"],e.agencyLists.length>0)){var o=e.agencyLists[0]["value"];for(var a in e.agencyLists)if(e.agencyLists[a]["selected"]){o=e.agencyLists[a]["value"];break}e.govAgency=o}for(var n in e.itemsReports[e.index]["filterConfig"].hasOwnProperty("api")&&(e.api=e.itemsReports[e.index]["filterConfig"]["api"]),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("filters")&&(e.filters=e.itemsReports[e.index]["filterConfig"]["filters"]),e.filters)"select"!==e.filters[n]["type"]&&"date"!==e.filters[n]["type"]||(e.data[e.filters[n]["key"]]=e.filters[n]["value"]);for(var i in e.itemsReports[e.index]["filterConfig"].hasOwnProperty("buttons")&&(e.buttons=e.itemsReports[e.index]["filterConfig"]["buttons"],e.buttons.length>0&&setTimeout(function(){e.buttonsShow=!0},100)),e.itemsReports[e.index]["filterConfig"].hasOwnProperty("exportXML")&&(e.exportXML=e.itemsReports[e.index]["filterConfig"]["exportXML"]),e.report1Def={},e.itemsReportsConfig)e.report1Def[e.itemsReportsConfig[i]["value"]]=e.itemsReportsConfig[i]["text"];e.reportType=e.itemsReports[e.index]["document"],e.showConfig&&(e.showConfig=!1,setTimeout(function(){e.showConfig=!0},200)),e.pdfBlob=""}},200)}},methods:{doCreatePDF:function(){var e=this;e.reportType.startsWith("STATISTIC")?e.doPrintReportFix():e.doDynamicReport(),e.isCallData=!0},doDynamicReport:function doDynamicReport(){var vm=this;vm.docDefinition={};var docDString={};for(var key in vm.dataReportXX="",docDString=JSON.stringify(vm.reportConfigStatic[vm.index]["docDefinition"]),docDString=docDString.replace(/\[\$siteName\$\]/g,vm.$store.getters.siteName),vm.filters){var find=vm.filters[key]["key"],currentVal=vm.data[vm.filters[key]["key"]];if(""!==currentVal&&void 0!==currentVal&&null!==currentVal){var dateStr=new Date(currentVal).toLocaleDateString("vi-VN");if("Invalid Date"!==dateStr&&13===String(currentVal).length)docDString=docDString.replace(eval("/\\[\\$"+find+"\\$\\]/g"),dateStr);else{if("select"===vm.filters[key]["type"])for(var keySource in vm.filters[key]["source"])String(vm.filters[key]["source"][keySource]["value"])===String(currentVal)&&(currentVal=vm.filters[key]["source"][keySource]["name"]);docDString=docDString.replace(eval("/\\[\\$"+find+"\\$\\]/g"),currentVal)}}else{for(var _keySource in currentVal="",vm.filters[key]["source"])if(""===currentVal||"0"===currentVal){currentVal=vm.filters[key]["source"][_keySource]["name"];break}docDString=docDString.replace(eval("/\\[\\$"+find+"\\$\\]/g"),currentVal)}}for(var _key7 in vm.agencyLists=vm.itemsReports[vm.index]["filterConfig"]["groupIds"],vm.agencyLists)if(String(vm.agencyLists[_key7]["value"])===String(vm.govAgency)){docDString=docDString.replace(/\[\$groupIds\$\]/g,vm.agencyLists[_key7]["text"]);break}vm.api=vm.itemsReports[vm.index]["filterConfig"]["api"];var widthsConfig=[];widthsConfig.push(30);var headerTableReport="[",header2TableReport="[";headerTableReport+=JSON.stringify({text:"STT",alignment:"center",bold:!0})+",",header2TableReport+=JSON.stringify({text:"(1)",alignment:"center",italics:!0})+",";var ine=2,colLeng=0;for(var _key8 in vm.itemsReportsConfig)if(vm.itemsReportsConfig[_key8].hasOwnProperty("selected")&&vm.itemsReportsConfig[_key8]["selected"]){colLeng+=1,widthsConfig.push("auto");var str1=" ";void 0!==vm.report1Def[vm.itemsReportsConfig[_key8]["value"]]&&null!==vm.report1Def[vm.itemsReportsConfig[_key8]["value"]]&&""!==vm.report1Def[vm.itemsReportsConfig[_key8]["value"]]&&(str1=vm.report1Def[vm.itemsReportsConfig[_key8]["value"]]),headerTableReport+=JSON.stringify({text:str1,alignment:"center",bold:!0})+",",header2TableReport+=JSON.stringify({text:"("+ine+")",alignment:"center",italics:!0})+",",ine+=1}vm.noHeader&&(vm.dataReportXX+=headerTableReport.substring(0,headerTableReport.length-1)+"],",vm.dataReportXX+=header2TableReport.substring(0,header2TableReport.length-1)+"],");var filter={document:vm.reportType,data:vm.data,api:vm.api};filter["govAgency"]=vm.govAgency,filter["agencyLists"]=vm.agencyLists,vm.pdfBlob=null,vm.isShowLoading=!0,vm.$store.dispatch("getAgencyReportLists",filter).then(function(result){if(null!==result&&void 0!==result){vm.showErrorData=!1;var dataReport=result,dossierRaw={},dataReportCurrent={},dataReportTotal="",textGroup="";for(var keyGroup in vm.groupBy)if(String(vm.groupBy[keyGroup]["key"])===String(vm.groupByVal)){textGroup=vm.groupBy[keyGroup]["display"];break}for(var _key9 in dataReport)if(dataReportCurrent=dataReport[_key9],""!==dossierRaw[dataReportCurrent[vm.groupByVal]]&&void 0!==dossierRaw[dataReportCurrent[vm.groupByVal]])dossierRaw[dataReportCurrent[vm.groupByVal]][textGroup]===dataReportCurrent[textGroup]&&(dossierRaw[dataReportCurrent[vm.groupByVal]]["dossiers"].push(dataReportCurrent),dossierRaw[dataReportCurrent[vm.groupByVal]]["totalChild"]=dossierRaw[dataReportCurrent[vm.groupByVal]]["totalChild"]+1);else{var dossierRawItem={};dataReportCurrent.hasOwnProperty("dossierId")?(dossierRawItem[vm.groupByVal]=dataReportCurrent[vm.groupByVal],dossierRawItem[textGroup]=dataReportCurrent[textGroup],dossierRawItem["totalChild"]=1,dossierRawItem["dossiers"]=[],dossierRaw[dataReportCurrent[vm.groupByVal]]=dossierRawItem,dossierRaw[dataReportCurrent[vm.groupByVal]][textGroup]=dataReportCurrent[textGroup],dossierRaw[dataReportCurrent[vm.groupByVal]]["dossiers"].push(dataReportCurrent)):(dossierRawItem[vm.groupByVal]=dataReportCurrent[vm.groupByVal],dossierRawItem[textGroup]=dataReportCurrent[textGroup],dossierRawItem["totalChild"]=0,dossierRawItem["dossiers"]=[],dossierRaw[dataReportCurrent[vm.groupByVal]]=dossierRawItem,dossierRaw[dataReportCurrent[vm.groupByVal]][textGroup]=dataReportCurrent[textGroup],dossierRaw[dataReportCurrent[vm.groupByVal]]["dossiers"]=[])}var dataToExportCSV=[],dataRaw=[];for(var _key10 in dossierRaw)dataRaw.push(dossierRaw[_key10]);for(var _key11 in dataRaw.reverse(),dataRaw){if(void 0!==dataRaw[_key11][vm.groupByVal]&&null!==dataRaw[_key11][vm.groupByVal]&&""!==dataRaw[_key11][vm.groupByVal]){var csvGroup=[];for(var colLengIndex in csvGroup.push(dataRaw[_key11][textGroup]+" ( "+dataRaw[_key11]["totalChild"]+" ) "),colLeng)csvGroup.push("");if(dataToExportCSV.push(csvGroup),vm.doExportExcel){dataReportTotal+="[ ",dataReportTotal+=JSON.stringify({text:dataRaw[_key11][textGroup]+" ( "+dataRaw[_key11]["totalChild"]+" ) ",bold:!0,style:"tdStyle"})+",";for(var csvIndexXXX=0;csvIndexXXX<colLeng-1;csvIndexXXX++)dataReportTotal+=JSON.stringify({text:"",bold:!0,style:"tdStyle"})+",";dataReportTotal+=JSON.stringify({text:"",bold:!0,style:"tdStyle"}),dataReportTotal+=" ],"}else dataReportTotal+=JSON.stringify([{colSpan:colLeng+1,text:dataRaw[_key11][textGroup]+" ( "+dataRaw[_key11]["totalChild"]+" ) ",bold:!0,style:"tdStyle"}])+","}var dossiersArray=dataRaw[_key11]["dossiers"],indexStt=1,dataRow=[];for(var keyDossier in dossiersArray){dataRow=[];var dataToExportCSVItem=[],dossierObj=dossiersArray[keyDossier];for(var keyVal in dataToExportCSVItem.push(indexStt),dataRow.push({text:indexStt,alignment:"center",style:"tdStyle"}),vm.itemsReportsConfig)if(vm.itemsReportsConfig[keyVal].hasOwnProperty("selected")&&vm.itemsReportsConfig[keyVal]["selected"]){var alignmentConfig="center";vm.itemsReportsConfig[keyVal].hasOwnProperty("align")&&(alignmentConfig=vm.itemsReportsConfig[keyVal]["align"]);var ddStr=" ",currentConfig=vm.itemsReportsConfig[keyVal];if(currentConfig.hasOwnProperty("calculator")){var calu=currentConfig["calculator"].replace(/dataInput/g,"dossierObj");ddStr=isNaN(eval(calu))?eval(calu):Math.round(eval(calu))}else void 0!==dossierObj[vm.itemsReportsConfig[keyVal]["value"]]&&null!==dossierObj[vm.itemsReportsConfig[keyVal]["value"]]&&""!==dossierObj[vm.itemsReportsConfig[keyVal]["value"]]&&(ddStr=dossierObj[vm.itemsReportsConfig[keyVal]["value"]]);dataToExportCSVItem.push(ddStr),dataRow.push({text:ddStr,alignment:alignmentConfig,style:"tdStyle"})}dataReportTotal+=JSON.stringify(dataRow)+",",indexStt+=1,dataToExportCSV.push(dataToExportCSVItem)}}for(var excelKey in dataReportTotal=dataReportTotal.substring(0,dataReportTotal.length-1),vm.dataReportXX+=dataReportTotal,vm.csvExport=[],vm.csvExport=dataToExportCSV,vm.fields=[],vm.fields.push("STT"),vm.itemsReportsConfig)if(vm.itemsReportsConfig[excelKey]["selected"]){var stringColumn=vm.itemsReportsConfig[excelKey]["value"];""!==vm.itemsReportsConfig[excelKey]["text"]&&(stringColumn=vm.itemsReportsConfig[excelKey]["text"]),vm.fields.push(stringColumn)}vm.showCSVDownload=!0,docDString=docDString.replace(/"\[\$tableWidth\$\]"/g,JSON.stringify(widthsConfig)),docDString=docDString.replace(/"\[\$report\$\]"/g,vm.dataReportXX),vm.docDefinition=JSON.parse(docDString);var pdfDocGenerator=pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_1___default.a.createPdf(vm.docDefinition);pdfDocGenerator.getBlob(function(e){vm.pdfBlob=window.URL.createObjectURL(e),vm.isShowLoading=!1,vm.doExportExcel&&vm.$store.dispatch("getExcelReportFromServer",{data:docDString,fileName:"baocaothongke.xls"})})}else vm.isShowLoading=!1,vm.showErrorData=!0})},doPrintReportFix:function doPrintReportFix(){var vm=this;vm.agencyLists=[],vm.api="",vm.dataReportXX="",vm.docDefinition={};var docDString={};for(var key in docDString=JSON.stringify(vm.reportConfigStatic[vm.index]["docDefinition"]),docDString=docDString.replace(/\[\$siteName\$\]/g,vm.$store.getters.siteName),vm.filters){var find=vm.filters[key]["key"],currentVal=vm.data[vm.filters[key]["key"]];if(""!==currentVal&&void 0!==currentVal&&null!==currentVal){var dateStr=new Date(currentVal).toLocaleDateString("vi-VN");if("Invalid Date"!==dateStr&&13===String(currentVal).length)docDString=docDString.replace(eval("/\\[\\$"+find+"\\$\\]/g"),dateStr);else{if("select"===vm.filters[key]["type"])for(var keySource in vm.filters[key]["source"])String(vm.filters[key]["source"][keySource]["value"])===String(currentVal)&&(currentVal=vm.filters[key]["source"][keySource]["name"]);docDString=docDString.replace(eval("/\\[\\$"+find+"\\$\\]/g"),currentVal)}}else{for(var _keySource2 in currentVal="",vm.filters[key]["source"])if(""===currentVal||"0"===currentVal){currentVal=vm.filters[key]["source"][_keySource2]["name"];break}docDString=docDString.replace(eval("/\\[\\$"+find+"\\$\\]/g"),currentVal)}}for(var _key12 in vm.agencyLists=vm.itemsReports[vm.index]["filterConfig"]["groupIds"],vm.agencyLists)if(String(vm.agencyLists[_key12]["value"])===String(vm.govAgency)){docDString=docDString.replace(/\[\$groupIds\$\]/g,vm.agencyLists[_key12]["text"]);break}vm.api=vm.itemsReports[vm.index]["filterConfig"]["api"],vm.isShowLoading=!0;var filter={document:vm.reportType,data:vm.data,api:vm.api};filter["govAgency"]=vm.govAgency,filter["agencyLists"]=vm.agencyLists,vm.pdfBlob=null,vm.isShowLoading=!0;var sumKey=vm.itemsReports[vm.index]["filterConfig"]["sumKey"],selection=vm.itemsReports[vm.index]["filterConfig"]["selection"],merge=vm.itemsReports[vm.index]["filterConfig"]["merge"],sort=vm.itemsReports[vm.index]["filterConfig"]["sort"],subKey=vm.itemsReports[vm.index]["filterConfig"]["subKey"];vm.$store.dispatch("getAgencyReportLists",filter).then(function(result){if(null!==result){vm.showErrorData=!1;var index=1,dataRowTotal=[],totalText="Tổng số";for(var keyMapping in"month"===sumKey&&(totalText="Cả năm"),dataRowTotal.push({text:totalText,colSpan:2,bold:!0,alignment:"center",style:"tdStyle"}),vm.itemsReportsConfig)"note"===vm.itemsReportsConfig[keyMapping]["value"]?dataRowTotal.push({text:"",alignment:"center",style:"tdStyle"}):dataRowTotal.push({text:0,alignment:"center",style:"tdStyle"});var resultData=result;void 0!==selection&&null!==selection&&selection.length>0&&(resultData=result.filter(function(e){var t=0;for(var r in selection)"#"===selection[r]["compare"]?String(e[selection[r]["key"]])!==String(selection[r]["value"])&&(t+=1):"="===selection[r]["compare"]?""===selection[r]["value"]?""!==String(e[selection[r]["key"]])&&void 0!==e[selection[r]["key"]]&&null!==e[selection[r]["key"]]||(t+=1):String(e[selection[r]["key"]])===String(selection[r]["value"])&&(t+=1):""!==String(e[selection[r]["key"]])&&void 0!==e[selection[r]["key"]]&&null!==e[selection[r]["key"]]||(t+=1);if(t===selection.length)return e}));var resultDataTotal=resultData.filter(function(e){if(null!==subKey&&void 0!==subKey&&""!==subKey){if((""===e[sumKey]||"0"===String(e[sumKey])||void 0===e[sumKey]||null===e[sumKey])&&""===e[subKey])return e}else if(""===e[sumKey]||"0"===String(e[sumKey])||void 0===e[sumKey]||null===e[sumKey])return e}),resultDataVari={};for(var _key13 in resultData){var keyVari="";for(var keysd in merge)keyVari+=resultData[_key13][merge[keysd]]+"_";if(void 0===resultDataVari[keyVari]||null===resultDataVari[keyVari]||""===resultDataVari[keyVari])resultDataVari[keyVari]=resultData[_key13];else for(var kkey in resultDataVari[keyVari])""!==resultDataVari[keyVari][kkey]&&void 0!==resultDataVari[keyVari][kkey]&&null!==resultDataVari[keyVari][kkey]&&("NaN"===String(parseInt(resultDataVari[keyVari][kkey]))?resultDataVari[keyVari][kkey]=resultData[_key13][kkey]:resultDataVari[keyVari][kkey]="ontimePercentage"===kkey?parseInt(resultData[_key13][kkey]):"month"===kkey||"year"===kkey?parseInt(resultData[_key13][kkey]):parseInt(resultData[_key13][kkey])+parseInt(resultDataVari[keyVari][kkey]))}for(var _key14 in resultData=[],resultDataVari)void 0===_key14||_key14.startsWith("undefined")||resultData.push(resultDataVari[_key14]);if(""!==sort&&void 0!==sort&&null!==sort&&(resultData=vm.sortByKey(resultData,sort)),null!==subKey&&void 0!==subKey&&""!==subKey){var arraySubKey={};for(var _key15 in resultData)(""!==resultData[_key15][sumKey]&&"0"!==String(resultData[_key15][sumKey])&&void 0!==resultData[_key15][sumKey]&&null!==resultData[_key15][sumKey]||null!==subKey&&void 0!==subKey&&""!==subKey&&""===resultData[_key15][subKey]&&""!==resultData[_key15][sumKey]&&"0"!==resultData[_key15][sumKey])&&(void 0!==arraySubKey[resultData[_key15][sumKey]]&&null!==arraySubKey[resultData[_key15][sumKey]]?arraySubKey[resultData[_key15][sumKey]].push(resultData[_key15]):(arraySubKey[resultData[_key15][sumKey]]=[],arraySubKey[resultData[_key15][sumKey]].push(resultData[_key15])));for(var keySUBARRAY in resultData=[],arraySubKey){var subKeySortData=vm.sortByKey(arraySubKey[keySUBARRAY],subKey);for(var keyData in subKeySortData)resultData.push(subKeySortData[keyData])}}var dataToExportCSV=[];for(var _key16 in resultData){var dataInput=resultData[_key16];if(""!==resultData[_key16][sumKey]&&"0"!==String(resultData[_key16][sumKey])&&void 0!==resultData[_key16][sumKey]&&null!==resultData[_key16][sumKey]||null!==subKey&&void 0!==subKey&&""!==subKey&&""===resultData[_key16][subKey]&&""!==resultData[_key16][sumKey]&&"0"!==String(resultData[_key16][sumKey])){var dataRow=[],dataToExportCSVItem=[];null!==subKey&&void 0!==subKey&&""!==subKey&&""!==resultData[_key16][subKey]?(dataToExportCSVItem.push(""),dataRow.push({text:"",alignment:"center",style:"tdStyle"})):(dataToExportCSVItem.push(index),dataRow.push({text:index,alignment:"center",style:"tdStyle"}));var indexTotal=1;for(var _keyMapping in vm.itemsReportsConfig){var currentConfig=vm.itemsReportsConfig[_keyMapping],dataText=" ",preff=currentConfig.hasOwnProperty("prefix")?currentConfig["prefix"]:"";currentConfig.hasOwnProperty("calculator")?dataText=isNaN(eval(currentConfig["calculator"]))?eval(currentConfig["calculator"]):Math.round(eval(currentConfig["calculator"])):void 0!==resultData[_key16][currentConfig["value"]]&&null!==resultData[_key16][currentConfig["value"]]&&(dataText=currentConfig.hasOwnProperty("subValue")&&""!==resultData[_key16][subKey]?" - "+resultData[_key16][currentConfig["subValue"]]+" ":preff+" "+resultData[_key16][currentConfig["value"]]+" ");var alignmentConfig="center";currentConfig.hasOwnProperty("align")&&(alignmentConfig=currentConfig["align"]),dataToExportCSVItem.push(dataText),dataRow.push({text:" "===dataText?0:dataText,alignment:alignmentConfig,style:"tdStyle"}),0===vm.govAgency&&null!==dataRowTotal[indexTotal]&&void 0!==dataRowTotal[indexTotal]&&""!==dataRowTotal[indexTotal]["text"]&&("ontimePercentage"===currentConfig["value"]?dataRowTotal[indexTotal]["text"]=parseInt(dataText):isNaN(dataText)?dataRowTotal[indexTotal]["text"]=0:dataRowTotal[indexTotal]["text"]=parseInt(dataRowTotal[indexTotal]["text"])+parseInt(dataText)),indexTotal+=1}null!==subKey&&void 0!==subKey&&""!==subKey&&""!==resultData[_key16][subKey]||(index+=1),vm.dataReportXX+=JSON.stringify(dataRow)+",",dataToExportCSV.push(dataToExportCSVItem)}}if(vm.agencyLists.length>0&&0===vm.govAgency){for(var keyXXTT in resultDataTotal){var indexTotalXXTT=1;for(var keyMappingXXTT in vm.itemsReportsConfig){var dataTextXXTT="",currentConfigXXTT=vm.itemsReportsConfig[keyMappingXXTT];if(currentConfigXXTT.hasOwnProperty("calculator")){var dataInputXXTT=resultDataTotal[keyXXTT],calu=currentConfigXXTT["calculator"].replace(/dataInput/g,"dataInputXXTT");dataTextXXTT=isNaN(eval(calu))?eval(calu):Math.round(eval(calu))}else void 0!==resultDataTotal[keyXXTT][currentConfigXXTT["value"]]&&null!==resultDataTotal[keyXXTT][currentConfigXXTT["value"]]&&""!==resultDataTotal[keyXXTT][currentConfigXXTT["value"]]&&(dataTextXXTT=resultDataTotal[keyXXTT][currentConfigXXTT["value"]]+" ");dataRowTotal[indexTotalXXTT]["text"]=isNaN(parseInt(dataTextXXTT))?"0 ":parseInt(dataTextXXTT)+" ",indexTotalXXTT+=1}break}console.log("dataRowTotal 555",dataRowTotal)}else for(var _keyXXTT in resultDataTotal){var _indexTotalXXTT=1;for(var _keyMappingXXTT in vm.itemsReportsConfig){var _dataTextXXTT="",_currentConfigXXTT=vm.itemsReportsConfig[_keyMappingXXTT];if(_currentConfigXXTT.hasOwnProperty("calculator")){var dataInputXXTT=resultDataTotal[_keyXXTT],_calu=_currentConfigXXTT["calculator"].replace(/dataInput/g,"dataInputXXTT");_dataTextXXTT=isNaN(eval(_calu))?eval(_calu):Math.round(eval(_calu))}else void 0!==resultDataTotal[_keyXXTT][_currentConfigXXTT["value"]]&&null!==resultDataTotal[_keyXXTT][_currentConfigXXTT["value"]]&&""!==resultDataTotal[_keyXXTT][_currentConfigXXTT["value"]]&&(_dataTextXXTT=resultDataTotal[_keyXXTT][_currentConfigXXTT["value"]]+" ");dataRowTotal[_indexTotalXXTT]["text"]=parseInt(_dataTextXXTT)+" ",_indexTotalXXTT+=1}}vm.dataReportXX+=JSON.stringify(dataRowTotal);var itemTotal=[];for(var keyTotalCSV in dataRowTotal)itemTotal.push(dataRowTotal[keyTotalCSV]["text"]);for(var excelKey in dataToExportCSV.push(itemTotal),vm.csvExport=[],vm.csvExport=dataToExportCSV,vm.fields=[],vm.fields.push("STT"),vm.fields.push(sumKey),vm.itemsReportsConfig)if(vm.itemsReportsConfig[excelKey]["selected"]){var stringColumn=vm.itemsReportsConfig[excelKey]["value"];""!==vm.itemsReportsConfig[excelKey]["text"]&&(stringColumn=vm.itemsReportsConfig[excelKey]["text"]),vm.fields.push(stringColumn)}vm.showCSVDownload=!0,docDString=docDString.replace(/"\[\$report\$\]"/g,vm.dataReportXX),vm.docDefinition=JSON.parse(docDString);var pdfDocGenerator=pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_1___default.a.createPdf(vm.docDefinition);pdfDocGenerator.getBlob(function(e){vm.pdfBlob=window.URL.createObjectURL(e),vm.isShowLoading=!1,vm.doExportExcel&&vm.$store.dispatch("getExcelReportFromServer",{data:docDString,fileName:(new Date).getTime()+".xls"})})}else vm.isShowLoading=!1,vm.showErrorData=!0})},doCreateReport:function(e){var t=this;t.showGuilds=!1,t.$refs.form.validate()&&(t.doExportExcel=e,t.showConfig=!1,t.doCreatePDF())},sortByKey:function(e,t){return e.sort(function(e,r){var o=e[t],a=r[t];return o<a?-1:o>a?1:0})},changeConfig:function(e){},doChotSoLieu:function(e,t){var r=this,o={api:t["api"],key:t["key"],value:e,data:r.data};r.$store.dispatch("doChotSoLieu",o).then(function(){r.doCreatePDF()})},reloadPickerChange:function(e){var t=this;t.showPicker=!1,setTimeout(function(){t.data[e]=new Date(t.data[e]).toLocaleDateString("vi-VN"),t.showPicker=!0},200)},sdfsdfdsf:function(){var e=this;e.$store.dispatch("doExportXlsxddd")},toDoNotDone:function(){alert("Đang phát triển.")},doDynamicReportXML:function(){var e=this;e.agencyLists=e.itemsReports[e.index]["filterConfig"]["groupIds"],e.jsonMapperJson={},e.jsonMapperJson=e.itemsReports[e.index]["userConfig"],e.api=e.itemsReports[e.index]["filterConfig"]["api"];var t={document:e.reportType,data:e.data,api:e.api};t["govAgency"]=e.govAgency,t["agencyLists"]=e.agencyLists,e.$store.dispatch("getAgencyReportLists",t).then(function(t){null!==t&&void 0!==t&&jsonMapper({content:t,blank:""},e.jsonMapperJson).then(function(e){console.log(e);var t={header:!0,indent:"  "},r=Object(jstoxml__WEBPACK_IMPORTED_MODULE_5__["toXML"])(e,t),o=new Blob([(new TextEncoder).encode(r)],{type:"text/plain;charset=utf-8;"});FileSaver.saveAs(o,(new Date).getTime()+".xml")})})},convertPDFToHTML:function(e){window.PDFJS.getDocument(e).then(window.pdf_table_extractor).then(function(e){var t=[],r=window.$("<table></table>").attr("border",1);for(var o in e.pageTables){var a=e.pageTables[o];t=t.concat(a.tables);for(var n=a.tables,i=a.merge_alias,s=a.merges,l=0;l<n.length;l++){for(var u=window.$("<tr></tr>"),c=0;c<n[l].length;c++){var p=[l,c].join("-");if(!i[p]){var d=window.$("<td></td>");s[p]&&(s[p].width>1&&d.attr("colspan",s[p].width),s[p].height>1&&d.attr("rowspan",s[p].height)),d.html(n[l][c].replace(/\n/gi,"<br/>").replace(/↵/gi,"<br/>")),u.append(d)}}r.append(u)}}var f='<html xmlns:x="urn:schemas-microsoft-com:office:excel">';f+='<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet>',f+="<x:Name>Test Sheet</x:Name>",f+="<x:WorksheetOptions><x:Panes></x:Panes></x:WorksheetOptions></x:ExcelWorksheet>",f+="</x:ExcelWorksheets></x:ExcelWorkbook></xml></head><body>",f+='<table></table><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td colspan="10" valign="top" width="167"><p align="center"><strong><strong>-------</strong></p></td><td valign="top" width="275" colspan="10"><p align="center"><strong>CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM<br>Độc lập - Tự do - Hạnh phúc <br>---------------</strong></p></td></tr></tbody></table><table></table>',f+='<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td colspan="20" valign="top" width="167"><p align="center"><strong>TỔNG HỢP HỒ SƠ NỘP TRỰC TUYẾN THEO LĨNH VỰC</strong></p></td></td></tr></tbody></table><table></table>',f+="<table border='1px' width='1366px'>",f+=r[0].innerHTML,f+='<table></table><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td colspan="4" valign="top" width="167"><p align="left"><strong>Nơi nhận:</strong></p></td><td valign="top" width="275" colspan="16"><p align="right"><strong>THỦ TRƯỞNG ĐƠN VỊ</strong><br/>(Ký và ghi rõ họ tên)</p></td></tr></tbody></table><table></table>',f+="</body></html>";var m=new Blob([(new TextEncoder).encode(f)],{type:"data:application/vnd.ms-excel;charset=utf-8;"});FileSaver.saveAs(m,(new Date).getTime()+".xls")})},goToThongKe:function(){var e=this,t=e.data["fromStatisticDate"],r=e.data["toStatisticDate"],o=window.themeDisplay.getSiteAdminURL().split("/~")[0].replace("group","web"),a=o+"/thong-ke#/danh-gia-thu-tuc?groupId="+e.govAgency+"&fromStatisticDate="+t+"&toStatisticDate="+r;window.location.href=a},s2ab:function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),o=0;o!=e.length;++o)r[o]=255&e.charCodeAt(o);return t},parseCurrentDate:function(e){if(!e)return null;try{var t=e.split("/"),r=_slicedToArray(t,3),o=r[0],a=r[1],n=r[2];return"".concat(n,"-").concat(a.padStart(2,"0"),"-").concat(o.padStart(2,"0"))}catch(i){return""}}}}}});
//# sourceMappingURL=app.js.map